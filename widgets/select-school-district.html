<!-- Wrap the whole widget into a form -->
<form id="report-form">
    <label for="select-state">
        <h2>Select State</h2>
    </label>
    <select id="select-state" name="state" required disabled>
        <option value disabled>Select State</option>
    </select>

    <label for="select-district">
        <h2>Select District</h2>
    </label>
    <select id="select-district" name="school_district" required disabled>
        <option value disabled>Select School District</option>
    </select>
</form>

<script async>!async function(){function e(e,t,n){const i=document.createElement(e);return Object.assign(i,t),n&&n.append(i),i}function t(e){for(;e.firstChild;)e.removeChild(e.firstChild)}!function(n,i){const o={};n.forEach(e=>{o[e.state]=e.state}),t(i),e("option",{value:"",disabled:!0,innerText:"Select State"},i),Object.keys(o).sort((e,t)=>o[e].localeCompare(o[t])).forEach(t=>{e("option",{value:t,innerText:o[t]},i)}),i.addEventListener("change",o=>{const c=document.querySelector("#select-district");!function(n,i,o){const c={};n.filter(e=>e.state===o).forEach(e=>{c[e.district_id]=String(e.district_name).titleCase()}),t(i),e("option",{value:"",disabled:!0,innerText:"Select School District"},i),Object.keys(c).sort((e,t)=>c[e].localeCompare(c[t])).forEach(t=>{e("option",{value:t,innerText:c[t]},i)}),i.addEventListener("change",e=>{window.goto(`../report/index.html?district_id=${i.value}`)}),i.selectedIndex="0",i.removeAttribute("disabled")}(n,c,i.value)}),i.selectedIndex="0",i.removeAttribute("disabled")}(await loadCSV(CURRENT_OPTIONS["tcm-metadata-url"]),document.querySelector("#select-state"))}();</script>