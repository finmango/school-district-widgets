<!-- Google Charts -->
<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>

<!-- CSV Parsing -->
<script type="text/javascript" src="{{root}}/third_party/papaparse/papaparse.min.js"></script>

<!-- Custom dependencies for data handling -->
<script type="text/javascript" src="{{root}}/static/data-loader.min.js"></script>

<!-- Configuration loading -->
<script type="text/javascript">

    // Global object used to cache objects and data
    CACHE = window.CACHE || { 'CSV': {}, 'gcharts': {} };

    // Define constants and default options
    DEFAULT_OPTIONS = window.DEFAULT_OPTIONS || {
        'tcm-metadata-url': 'https://storage.googleapis.com/school-districts/school-districts-metadata.csv',
        'cod-data-url': 'https://storage.googleapis.com/covid19-open-data/v3',
        'tcm-data-url': 'https://storage.googleapis.com/school-districts/cases/latest-school-cases.csv',
    }

    // Read options from session storage
    CURRENT_OPTIONS = window.CURRENT_OPTIONS || Object.keys(DEFAULT_OPTIONS).reduce((acc, key) =>
        Object.assign(acc, { [key]: sessionStorage.getItem(key) || DEFAULT_OPTIONS[key] }), {});
</script>