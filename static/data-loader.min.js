async function loadResource(t){const a=await fetch(t);if(a.ok)return a;throw new Error("Response failed")}function loadCSV(t,a=!1){return t in CACHE.CSV||(CACHE.CSV[t]=new Promise((async(e,r)=>{a&&(t="https://cors-anywhere.herokuapp.com/"+t);const o=await loadResource(t),n=await o.text();Papa.parse(n,{header:!0,skipEmptyLines:!0,complete:t=>{t.errors.length>0?r(t.errors[0]):e(t.data)}})}))),CACHE.CSV[t]}function recordsToDataTable(t,a=null){const e=[a=a||Object.keys(t[0])].concat(t.map((t=>a.map((a=>t[a])))));return google.visualization.arrayToDataTable(e)}function loadGoogleCharts(t=["corechart"]){const a=t.join(",");return a in CACHE.gcharts||(CACHE.gcharts[a]=google.charts.load("current",{packages:t})),CACHE.gcharts[a]}function getWindowDistrictId(t){return new URLSearchParams(t.location.search).get("district_id")}async function findStateLocationKey(t){return"US_"+(await loadCSV(""+CURRENT_OPTIONS["tcm-metadata-url"])).filter((a=>a.district_id===t))[0].state}async function findCountyLocationKey(t){const a=(await loadCSV(""+CURRENT_OPTIONS["tcm-metadata-url"])).filter((a=>a.district_id===t))[0],e=await loadCSV(""+CURRENT_OPTIONS["zip-data-url"]);if(e.filter((a=>a.fips===t)).length>0)return`US_${a.state}_${t}`;{const t=e.filter((t=>t.zip===a.zip_code))[0].fips;return`US_${a.state}_${t}`}}