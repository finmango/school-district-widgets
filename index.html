<!DOCTYPE html><html><!-- HTML page head --><head>
    <!-- HTML metadata -->
    <meta charset="UTF-8">
    <title>School District Widgets</title>
    <meta name="description" content="Interactive widgets for the school district covid data">
    <link rel="icon" type="image/png" href="./static/logo-64.png">

    <!-- Add to homescreen for Safari on iOS -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="School District Widgets">

    <!-- Homescreen icons -->
    <link rel="apple-touch-icon" href="./static/icon-64x64.png">
    <link rel="apple-touch-icon" sizes="64x64" href="./static/icon-64x64.png">
    <link rel="apple-touch-icon" sizes="128x128" href="./static/icon-128x128.png">
    <link rel="apple-touch-icon" sizes="512x512" href="./static/icon-512x512.png">

    <!-- Capabilities-related metadata -->
    <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1">

    <!-- MomentJS -->
    <!--
    <script type="text/javascript" src="./third_party/moment/min/moment.min.js"></script>
    -->

    <!-- Custom styles -->
    <link rel="stylesheet" href="./third_party/picnic/picnic.min.css">
    <link rel="stylesheet" href="./static/styles.min.css">

    <!-- Polyfills, custom functions and constants -->
    <script type="text/javascript" src="./static/polyfills.min.js"></script>


<!-- Chart dependencies -->
<!-- Google Charts -->
<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>

<!-- CSV Parsing -->
<script type="text/javascript" src="./third_party/papaparse/papaparse.min.js"></script>

<!-- Custom dependencies for data handling -->
<script type="text/javascript" src="./static/data-loader.min.js"></script>

<!-- Configuration loading -->
<script type="text/javascript">CACHE=window.CACHE||{CSV:{},gcharts:{}},DEFAULT_OPTIONS=window.DEFAULT_OPTIONS||{"tcm-metadata-url":"https://storage.googleapis.com/school-districts/school-districts-metadata.csv","cod-data-url":"https://storage.googleapis.com/covid19-open-data/v3","tcm-data-url":"https://storage.googleapis.com/school-districts/cases/latest-school-cases.csv"},CURRENT_OPTIONS=window.CURRENT_OPTIONS||Object.keys(DEFAULT_OPTIONS).reduce((t,o)=>Object.assign(t,{[o]:sessionStorage.getItem(o)||DEFAULT_OPTIONS[o]}),{}),GOOGLE_CHARTS_CONFIG=window.GOOGLE_CHARTS_CONFIG||{theme:"material",colors:["#FB780F"],legend:{position:CURRENT_OPTIONS.chart_legend_position||"none"},chartArea:{width:"100%",height:"100%",left:parseInt(CURRENT_OPTIONS.chart_padding_left||64),bottom:parseInt(CURRENT_OPTIONS.chart_padding_bottom||48),top:parseInt(CURRENT_OPTIONS.chart_padding_top||24)},titlePosition:"in",axisTitlesPosition:"in",hAxis:{textPosition:"bottom"},vAxis:{textPosition:"in",viewWindow:{min:0}},height:parseInt(CURRENT_OPTIONS.chart_height||300)};</script>

</head><body class="single-column">

    <div class="spacer"></div>

    <main>
        <div>
            <!-- Chart dependencies -->
<!-- Google Charts -->
<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>

<!-- CSV Parsing -->
<script type="text/javascript" src="./third_party/papaparse/papaparse.min.js"></script>

<!-- Custom dependencies for data handling -->
<script type="text/javascript" src="./static/data-loader.min.js"></script>

<!-- Configuration loading -->
<script type="text/javascript">CACHE=window.CACHE||{CSV:{},gcharts:{}},DEFAULT_OPTIONS=window.DEFAULT_OPTIONS||{"tcm-metadata-url":"https://storage.googleapis.com/school-districts/school-districts-metadata.csv","cod-data-url":"https://storage.googleapis.com/covid19-open-data/v3","tcm-data-url":"https://storage.googleapis.com/school-districts/cases/latest-school-cases.csv"},CURRENT_OPTIONS=window.CURRENT_OPTIONS||Object.keys(DEFAULT_OPTIONS).reduce((t,o)=>Object.assign(t,{[o]:sessionStorage.getItem(o)||DEFAULT_OPTIONS[o]}),{}),GOOGLE_CHARTS_CONFIG=window.GOOGLE_CHARTS_CONFIG||{theme:"material",colors:["#FB780F"],legend:{position:CURRENT_OPTIONS.chart_legend_position||"none"},chartArea:{width:"100%",height:"100%",left:parseInt(CURRENT_OPTIONS.chart_padding_left||64),bottom:parseInt(CURRENT_OPTIONS.chart_padding_bottom||48),top:parseInt(CURRENT_OPTIONS.chart_padding_top||24)},titlePosition:"in",axisTitlesPosition:"in",hAxis:{textPosition:"bottom"},vAxis:{textPosition:"in",viewWindow:{min:0}},height:parseInt(CURRENT_OPTIONS.chart_height||300)};</script>

<!-- Polyfills, custom functions and constants -->
<script type="text/javascript" src="./static/polyfills.min.js"></script>

<!-- Custom styles -->
<link rel="stylesheet" href="./third_party/picnic/picnic.min.css">
<link rel="stylesheet" href="./static/styles.min.css">

<!-- Wrap the whole widget into a DIV -->
<div>
    <script async>!async function(){const t=document.currentScript.parentElement,e=new URLSearchParams(location.search).get("district_id"),c=(await loadCSV(CURRENT_OPTIONS["tcm-metadata-url"])).filter(t=>t.district_id===e)[0],n=(String(c.district_name).titleCase().replace("School District",""),document.createElement("table"));n.style.tableLayout="fixed",n.classList.add("fullwidth"),t.append(n);let o=`<tr><th colspan=2>${c.district_name} School District Information</th></tr>`;c.school_count&&(o+=`<tr><td><b>Number of Schools</b></td><td>${c.school_count}</td></tr>`),c.student_count&&(o+=`<tr><td><b>Total Student Count</b></td><td>${c.student_count}</td></tr>`),c.teacher_count&&(o+=`<tr><td><b>Total Teacher Count</b></td><td>${c.teacher_count}</td></tr>`),n.innerHTML=o}();</script>
</div>
            <div class="spacer"></div>
            <div class="spacer"></div>
        </div>

        <div>
            <!-- Chart dependencies -->
<!-- Google Charts -->
<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>

<!-- CSV Parsing -->
<script type="text/javascript" src="./third_party/papaparse/papaparse.min.js"></script>

<!-- Custom dependencies for data handling -->
<script type="text/javascript" src="./static/data-loader.min.js"></script>

<!-- Configuration loading -->
<script type="text/javascript">CACHE=window.CACHE||{CSV:{},gcharts:{}},DEFAULT_OPTIONS=window.DEFAULT_OPTIONS||{"tcm-metadata-url":"https://storage.googleapis.com/school-districts/school-districts-metadata.csv","cod-data-url":"https://storage.googleapis.com/covid19-open-data/v3","tcm-data-url":"https://storage.googleapis.com/school-districts/cases/latest-school-cases.csv"},CURRENT_OPTIONS=window.CURRENT_OPTIONS||Object.keys(DEFAULT_OPTIONS).reduce((t,o)=>Object.assign(t,{[o]:sessionStorage.getItem(o)||DEFAULT_OPTIONS[o]}),{}),GOOGLE_CHARTS_CONFIG=window.GOOGLE_CHARTS_CONFIG||{theme:"material",colors:["#FB780F"],legend:{position:CURRENT_OPTIONS.chart_legend_position||"none"},chartArea:{width:"100%",height:"100%",left:parseInt(CURRENT_OPTIONS.chart_padding_left||64),bottom:parseInt(CURRENT_OPTIONS.chart_padding_bottom||48),top:parseInt(CURRENT_OPTIONS.chart_padding_top||24)},titlePosition:"in",axisTitlesPosition:"in",hAxis:{textPosition:"bottom"},vAxis:{textPosition:"in",viewWindow:{min:0}},height:parseInt(CURRENT_OPTIONS.chart_height||300)};</script>

<!-- Polyfills, custom functions and constants -->
<script type="text/javascript" src="./static/polyfills.min.js"></script>

<!-- Custom styles -->
<link rel="stylesheet" href="./third_party/picnic/picnic.min.css">
<link rel="stylesheet" href="./static/styles.min.css">

<!-- Wrap the whole widget into a DIV -->
<div>
    <script async>!async function(){const t=document.currentScript.parentElement,s=new URLSearchParams(location.search).get("district_id"),e=(await loadCSV(CURRENT_OPTIONS["tcm-metadata-url"])).filter(t=>t.district_id===s)[0],a=(await loadCSV(CURRENT_OPTIONS["tcm-data-url"])).filter(t=>t.district_id===s),d=a.reduce((t,s)=>(t.sum_student_cases+=parseInt(s.new_student_cases)||0,t.sum_staff_cases+=parseInt(s.new_student_cases)||0,t),{sum_student_cases:0,sum_staff_cases:0}),c=a[a.length-1]||{},n=c.cumulative_student_cases||d.sum_student_cases,r=c.cumulative_staff_cases||d.sum_staff_cases;if(n){const s=document.createElement("table");s.style.tableLayout="fixed",s.classList.add("fullwidth"),t.append(s);let a=`<tr><th colspan=2>${e.district_name} School District Cases</th></tr>`;n&&(a+=`<tr><td><b>Total Student Cases</b></td><td>${n}</td></tr>`),r&&(a+=`<tr><td><b>Total Staff Cases</b></td><td>${r}</td></tr>`),c.date&&(a+=`<tr><td><b>Last Updated</b></td><td>${c.date}</td></tr>`),s.innerHTML=a}else t.style.display="none"}();</script>
</div>
            <div class="spacer"></div>
            <div class="spacer"></div>
        </div>

        <div>
            <!-- Chart dependencies -->
<!-- Google Charts -->
<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>

<!-- CSV Parsing -->
<script type="text/javascript" src="./third_party/papaparse/papaparse.min.js"></script>

<!-- Custom dependencies for data handling -->
<script type="text/javascript" src="./static/data-loader.min.js"></script>

<!-- Configuration loading -->
<script type="text/javascript">CACHE=window.CACHE||{CSV:{},gcharts:{}},DEFAULT_OPTIONS=window.DEFAULT_OPTIONS||{"tcm-metadata-url":"https://storage.googleapis.com/school-districts/school-districts-metadata.csv","cod-data-url":"https://storage.googleapis.com/covid19-open-data/v3","tcm-data-url":"https://storage.googleapis.com/school-districts/cases/latest-school-cases.csv"},CURRENT_OPTIONS=window.CURRENT_OPTIONS||Object.keys(DEFAULT_OPTIONS).reduce((t,o)=>Object.assign(t,{[o]:sessionStorage.getItem(o)||DEFAULT_OPTIONS[o]}),{}),GOOGLE_CHARTS_CONFIG=window.GOOGLE_CHARTS_CONFIG||{theme:"material",colors:["#FB780F"],legend:{position:CURRENT_OPTIONS.chart_legend_position||"none"},chartArea:{width:"100%",height:"100%",left:parseInt(CURRENT_OPTIONS.chart_padding_left||64),bottom:parseInt(CURRENT_OPTIONS.chart_padding_bottom||48),top:parseInt(CURRENT_OPTIONS.chart_padding_top||24)},titlePosition:"in",axisTitlesPosition:"in",hAxis:{textPosition:"bottom"},vAxis:{textPosition:"in",viewWindow:{min:0}},height:parseInt(CURRENT_OPTIONS.chart_height||300)};</script>

<!-- Wrap the whole widget into a DIV -->
<div>
    <script async>!async function(){const t=document.createElement("div");document.currentScript.parentElement.append(t);const a=await async function(){const t=new URLSearchParams(location.search).get("district_id");return`US_${(await loadCSV(`${CURRENT_OPTIONS["tcm-metadata-url"]}`)).filter(a=>a.district_id===t)[0].state}`}();let e=await loadCSV(`${CURRENT_OPTIONS["cod-data-url"]}/${a}/main.csv`);if("ontouchstart"in document.documentElement){const t=100;e=e.slice(-t)}const n=e[0].subregion1_name,c=e.filter(t=>""!==t.new_confirmed).map(t=>({Date:t.date,Cases:parseInt(t.new_confirmed)}));await loadGoogleCharts(["corechart"]),new google.visualization.ColumnChart(t).draw(recordsToDataTable(c),Object.assign({},GOOGLE_CHARTS_CONFIG,{title:`Confirmed cases in ${n}`,colors:["#0277BD"]}))}();</script>
</div>
            <div class="spacer"></div>
            <div class="spacer"></div>
        </div>

        <div>
            <!-- Chart dependencies -->
<!-- Google Charts -->
<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>

<!-- CSV Parsing -->
<script type="text/javascript" src="./third_party/papaparse/papaparse.min.js"></script>

<!-- Custom dependencies for data handling -->
<script type="text/javascript" src="./static/data-loader.min.js"></script>

<!-- Configuration loading -->
<script type="text/javascript">CACHE=window.CACHE||{CSV:{},gcharts:{}},DEFAULT_OPTIONS=window.DEFAULT_OPTIONS||{"tcm-metadata-url":"https://storage.googleapis.com/school-districts/school-districts-metadata.csv","cod-data-url":"https://storage.googleapis.com/covid19-open-data/v3","tcm-data-url":"https://storage.googleapis.com/school-districts/cases/latest-school-cases.csv"},CURRENT_OPTIONS=window.CURRENT_OPTIONS||Object.keys(DEFAULT_OPTIONS).reduce((t,o)=>Object.assign(t,{[o]:sessionStorage.getItem(o)||DEFAULT_OPTIONS[o]}),{}),GOOGLE_CHARTS_CONFIG=window.GOOGLE_CHARTS_CONFIG||{theme:"material",colors:["#FB780F"],legend:{position:CURRENT_OPTIONS.chart_legend_position||"none"},chartArea:{width:"100%",height:"100%",left:parseInt(CURRENT_OPTIONS.chart_padding_left||64),bottom:parseInt(CURRENT_OPTIONS.chart_padding_bottom||48),top:parseInt(CURRENT_OPTIONS.chart_padding_top||24)},titlePosition:"in",axisTitlesPosition:"in",hAxis:{textPosition:"bottom"},vAxis:{textPosition:"in",viewWindow:{min:0}},height:parseInt(CURRENT_OPTIONS.chart_height||300)};</script>

<!-- Wrap the whole widget into a DIV -->
<div>
    <script async>!async function(){const t=document.createElement("div");document.currentScript.parentElement.append(t);const e=await async function(){const t=new URLSearchParams(location.search).get("district_id");return`US_${(await loadCSV(`${CURRENT_OPTIONS["tcm-metadata-url"]}`)).filter(e=>e.district_id===t)[0].state}`}();let a=await loadCSV(`${CURRENT_OPTIONS["cod-data-url"]}/${e}/main.csv`);if("ontouchstart"in document.documentElement){const t=100;a=a.slice(-t)}const n=a.map((t,e)=>t.new_confirmed&&""!==t.new_confirmed?e:null).filter(t=>t)[0],c=(a=a.slice(n))[0].subregion1_name,i=a.map((t,e)=>{const n=Math.max(0,e-14),c=a.slice(n,e).reduce((t,e)=>t+(parseInt(e.new_confirmed)||0),0);return{Date:t.date,Cases:c}});await loadGoogleCharts(["corechart"]),new google.visualization.ColumnChart(t).draw(recordsToDataTable(i),Object.assign({},GOOGLE_CHARTS_CONFIG,{title:`Estimated active cases in ${c}`,colors:["#FB780F"]}))}();</script>
</div>
            <div class="spacer"></div>
            <div class="spacer"></div>
        </div>

        <div>
            <!-- Chart dependencies -->
<!-- Google Charts -->
<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>

<!-- CSV Parsing -->
<script type="text/javascript" src="./third_party/papaparse/papaparse.min.js"></script>

<!-- Custom dependencies for data handling -->
<script type="text/javascript" src="./static/data-loader.min.js"></script>

<!-- Configuration loading -->
<script type="text/javascript">CACHE=window.CACHE||{CSV:{},gcharts:{}},DEFAULT_OPTIONS=window.DEFAULT_OPTIONS||{"tcm-metadata-url":"https://storage.googleapis.com/school-districts/school-districts-metadata.csv","cod-data-url":"https://storage.googleapis.com/covid19-open-data/v3","tcm-data-url":"https://storage.googleapis.com/school-districts/cases/latest-school-cases.csv"},CURRENT_OPTIONS=window.CURRENT_OPTIONS||Object.keys(DEFAULT_OPTIONS).reduce((t,o)=>Object.assign(t,{[o]:sessionStorage.getItem(o)||DEFAULT_OPTIONS[o]}),{}),GOOGLE_CHARTS_CONFIG=window.GOOGLE_CHARTS_CONFIG||{theme:"material",colors:["#FB780F"],legend:{position:CURRENT_OPTIONS.chart_legend_position||"none"},chartArea:{width:"100%",height:"100%",left:parseInt(CURRENT_OPTIONS.chart_padding_left||64),bottom:parseInt(CURRENT_OPTIONS.chart_padding_bottom||48),top:parseInt(CURRENT_OPTIONS.chart_padding_top||24)},titlePosition:"in",axisTitlesPosition:"in",hAxis:{textPosition:"bottom"},vAxis:{textPosition:"in",viewWindow:{min:0}},height:parseInt(CURRENT_OPTIONS.chart_height||300)};</script>

<!-- Wrap the whole widget into a DIV -->
<div>
    <script async>!async function(){const e=document.createElement("div");document.currentScript.parentElement.append(e);const t=await async function(){const e=new URLSearchParams(location.search).get("district_id");return`US_${(await loadCSV(`${CURRENT_OPTIONS["tcm-metadata-url"]}`)).filter(t=>t.district_id===e)[0].state}`}(),a=await loadCSV(`${CURRENT_OPTIONS["cod-data-url"]}/${t}/main.csv`),n=a[0].subregion1_name,r=["search_trends_fever","search_trends_cough","search_trends_pneumonia"],o=a.filter(e=>r.some(t=>""!==e[t])).map(e=>{const t={Date:e.date};return r.forEach(a=>t[(e=>e.split("_").slice(2).join(" "))(a)]=parseFloat(e[a])),t});await loadGoogleCharts(["corechart"]),new google.visualization.LineChart(e).draw(recordsToDataTable(o),Object.assign({},GOOGLE_CHARTS_CONFIG,{title:`Google Search Trends in ${n}`,curveType:"function",legend:{position:"in"},colors:void 0}))}();</script>
</div>
            <div class="spacer"></div>
            <div class="spacer"></div>
        </div>

        <div>
            <!-- Chart dependencies -->
<!-- Google Charts -->
<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>

<!-- CSV Parsing -->
<script type="text/javascript" src="./third_party/papaparse/papaparse.min.js"></script>

<!-- Custom dependencies for data handling -->
<script type="text/javascript" src="./static/data-loader.min.js"></script>

<!-- Configuration loading -->
<script type="text/javascript">CACHE=window.CACHE||{CSV:{},gcharts:{}},DEFAULT_OPTIONS=window.DEFAULT_OPTIONS||{"tcm-metadata-url":"https://storage.googleapis.com/school-districts/school-districts-metadata.csv","cod-data-url":"https://storage.googleapis.com/covid19-open-data/v3","tcm-data-url":"https://storage.googleapis.com/school-districts/cases/latest-school-cases.csv"},CURRENT_OPTIONS=window.CURRENT_OPTIONS||Object.keys(DEFAULT_OPTIONS).reduce((t,o)=>Object.assign(t,{[o]:sessionStorage.getItem(o)||DEFAULT_OPTIONS[o]}),{}),GOOGLE_CHARTS_CONFIG=window.GOOGLE_CHARTS_CONFIG||{theme:"material",colors:["#FB780F"],legend:{position:CURRENT_OPTIONS.chart_legend_position||"none"},chartArea:{width:"100%",height:"100%",left:parseInt(CURRENT_OPTIONS.chart_padding_left||64),bottom:parseInt(CURRENT_OPTIONS.chart_padding_bottom||48),top:parseInt(CURRENT_OPTIONS.chart_padding_top||24)},titlePosition:"in",axisTitlesPosition:"in",hAxis:{textPosition:"bottom"},vAxis:{textPosition:"in",viewWindow:{min:0}},height:parseInt(CURRENT_OPTIONS.chart_height||300)};</script>

<!-- Wrap the whole widget into a DIV -->
<div>
    <script async>!async function(){const t=document.currentScript.parentElement,e=await async function(){const t=new URLSearchParams(location.search).get("district_id");return`US_${(await loadCSV(`${CURRENT_OPTIONS["tcm-metadata-url"]}`)).filter(e=>e.district_id===t)[0].state}`}(),a=await loadCSV(`${CURRENT_OPTIONS["cod-data-url"]}/${e}/main.csv`),o=a[0].subregion1_name,i=a[0],n=Object.keys(a[0]).filter(t=>t.startsWith("population_age_"));if(n.length>0&&n.every(t=>""!==i[t])){const e=document.createElement("div");t.append(e);const a=n.map(t=>({"Age Group":t.replace("population_age_","").replace("_and_older"," and older").replace("_"," - "),Population:parseInt(i[t])}));await loadGoogleCharts(["corechart"]),new google.visualization.ColumnChart(e).draw(recordsToDataTable(a),Object.assign({},GOOGLE_CHARTS_CONFIG,{title:`Age-stratified demographics of ${o}`,colors:["#4E342E"],vAxis:{textPosition:"out",viewWindow:{min:0}}}))}else t.style.display="none"}();</script>
</div>
            <div class="spacer"></div>
            <div class="spacer"></div>
        </div>

        <div>
            <!-- Chart dependencies -->
<!-- Google Charts -->
<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>

<!-- CSV Parsing -->
<script type="text/javascript" src="./third_party/papaparse/papaparse.min.js"></script>

<!-- Custom dependencies for data handling -->
<script type="text/javascript" src="./static/data-loader.min.js"></script>

<!-- Configuration loading -->
<script type="text/javascript">CACHE=window.CACHE||{CSV:{},gcharts:{}},DEFAULT_OPTIONS=window.DEFAULT_OPTIONS||{"tcm-metadata-url":"https://storage.googleapis.com/school-districts/school-districts-metadata.csv","cod-data-url":"https://storage.googleapis.com/covid19-open-data/v3","tcm-data-url":"https://storage.googleapis.com/school-districts/cases/latest-school-cases.csv"},CURRENT_OPTIONS=window.CURRENT_OPTIONS||Object.keys(DEFAULT_OPTIONS).reduce((t,o)=>Object.assign(t,{[o]:sessionStorage.getItem(o)||DEFAULT_OPTIONS[o]}),{}),GOOGLE_CHARTS_CONFIG=window.GOOGLE_CHARTS_CONFIG||{theme:"material",colors:["#FB780F"],legend:{position:CURRENT_OPTIONS.chart_legend_position||"none"},chartArea:{width:"100%",height:"100%",left:parseInt(CURRENT_OPTIONS.chart_padding_left||64),bottom:parseInt(CURRENT_OPTIONS.chart_padding_bottom||48),top:parseInt(CURRENT_OPTIONS.chart_padding_top||24)},titlePosition:"in",axisTitlesPosition:"in",hAxis:{textPosition:"bottom"},vAxis:{textPosition:"in",viewWindow:{min:0}},height:parseInt(CURRENT_OPTIONS.chart_height||300)};</script>

<!-- Wrap the whole widget into a DIV -->
<div>
    <script async>!async function(){const t=document.createElement("div");document.currentScript.parentElement.append(t);const a=await async function(){const t=new URLSearchParams(location.search).get("district_id"),a=(await loadCSV(`${CURRENT_OPTIONS["tcm-metadata-url"]}`)).filter(a=>a.district_id===t)[0],e=(await loadCSV("./static/zip-fips-map.csv")).filter(t=>t.zip===a.zip_code)[0].fips;return`US_${a.state}_${e}`}();let e=await loadCSV(`${CURRENT_OPTIONS["cod-data-url"]}/${a}/main.csv`);if("ontouchstart"in document.documentElement){const t=100;e=e.slice(-t)}const n=e[0].subregion2_name,i=e.filter(t=>""!==t.new_confirmed).map(t=>({Date:t.date,Cases:parseInt(t.new_confirmed)}));await loadGoogleCharts(["corechart"]),new google.visualization.ColumnChart(t).draw(recordsToDataTable(i),Object.assign({},GOOGLE_CHARTS_CONFIG,{title:`Confirmed cases in ${n}`,colors:["#0277BD"]}))}();</script>
</div>
            <div class="spacer"></div>
            <div class="spacer"></div>
        </div>

        <div>
            <!-- Chart dependencies -->
<!-- Google Charts -->
<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>

<!-- CSV Parsing -->
<script type="text/javascript" src="./third_party/papaparse/papaparse.min.js"></script>

<!-- Custom dependencies for data handling -->
<script type="text/javascript" src="./static/data-loader.min.js"></script>

<!-- Configuration loading -->
<script type="text/javascript">CACHE=window.CACHE||{CSV:{},gcharts:{}},DEFAULT_OPTIONS=window.DEFAULT_OPTIONS||{"tcm-metadata-url":"https://storage.googleapis.com/school-districts/school-districts-metadata.csv","cod-data-url":"https://storage.googleapis.com/covid19-open-data/v3","tcm-data-url":"https://storage.googleapis.com/school-districts/cases/latest-school-cases.csv"},CURRENT_OPTIONS=window.CURRENT_OPTIONS||Object.keys(DEFAULT_OPTIONS).reduce((t,o)=>Object.assign(t,{[o]:sessionStorage.getItem(o)||DEFAULT_OPTIONS[o]}),{}),GOOGLE_CHARTS_CONFIG=window.GOOGLE_CHARTS_CONFIG||{theme:"material",colors:["#FB780F"],legend:{position:CURRENT_OPTIONS.chart_legend_position||"none"},chartArea:{width:"100%",height:"100%",left:parseInt(CURRENT_OPTIONS.chart_padding_left||64),bottom:parseInt(CURRENT_OPTIONS.chart_padding_bottom||48),top:parseInt(CURRENT_OPTIONS.chart_padding_top||24)},titlePosition:"in",axisTitlesPosition:"in",hAxis:{textPosition:"bottom"},vAxis:{textPosition:"in",viewWindow:{min:0}},height:parseInt(CURRENT_OPTIONS.chart_height||300)};</script>

<!-- Wrap the whole widget into a DIV -->
<div>
    <script async>!async function(){const t=document.createElement("div");document.currentScript.parentElement.append(t);const a=await async function(){const t=new URLSearchParams(location.search).get("district_id"),a=(await loadCSV(`${CURRENT_OPTIONS["tcm-metadata-url"]}`)).filter(a=>a.district_id===t)[0],e=(await loadCSV("./static/zip-fips-map.csv")).filter(t=>t.zip===a.zip_code)[0].fips;return`US_${a.state}_${e}`}();let e=await loadCSV(`${CURRENT_OPTIONS["cod-data-url"]}/${a}/main.csv`);if("ontouchstart"in document.documentElement){const t=100;e=e.slice(-t)}const n=e.map((t,a)=>t.new_confirmed&&""!==t.new_confirmed?a:null).filter(t=>t)[0],c=(e=e.slice(n))[0].subregion2_name,i=e.map((t,a)=>{const n=Math.max(0,a-14),c=e.slice(n,a).reduce((t,a)=>t+(parseInt(a.new_confirmed)||0),0);return{Date:t.date,Cases:c}});await loadGoogleCharts(["corechart"]),new google.visualization.ColumnChart(t).draw(recordsToDataTable(i),Object.assign({},GOOGLE_CHARTS_CONFIG,{title:`Estimated active cases in ${c}`,colors:["#FB780F"]}))}();</script>
</div>
            <div class="spacer"></div>
            <div class="spacer"></div>
        </div>

        <div>
            <!-- Chart dependencies -->
<!-- Google Charts -->
<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>

<!-- CSV Parsing -->
<script type="text/javascript" src="./third_party/papaparse/papaparse.min.js"></script>

<!-- Custom dependencies for data handling -->
<script type="text/javascript" src="./static/data-loader.min.js"></script>

<!-- Configuration loading -->
<script type="text/javascript">CACHE=window.CACHE||{CSV:{},gcharts:{}},DEFAULT_OPTIONS=window.DEFAULT_OPTIONS||{"tcm-metadata-url":"https://storage.googleapis.com/school-districts/school-districts-metadata.csv","cod-data-url":"https://storage.googleapis.com/covid19-open-data/v3","tcm-data-url":"https://storage.googleapis.com/school-districts/cases/latest-school-cases.csv"},CURRENT_OPTIONS=window.CURRENT_OPTIONS||Object.keys(DEFAULT_OPTIONS).reduce((t,o)=>Object.assign(t,{[o]:sessionStorage.getItem(o)||DEFAULT_OPTIONS[o]}),{}),GOOGLE_CHARTS_CONFIG=window.GOOGLE_CHARTS_CONFIG||{theme:"material",colors:["#FB780F"],legend:{position:CURRENT_OPTIONS.chart_legend_position||"none"},chartArea:{width:"100%",height:"100%",left:parseInt(CURRENT_OPTIONS.chart_padding_left||64),bottom:parseInt(CURRENT_OPTIONS.chart_padding_bottom||48),top:parseInt(CURRENT_OPTIONS.chart_padding_top||24)},titlePosition:"in",axisTitlesPosition:"in",hAxis:{textPosition:"bottom"},vAxis:{textPosition:"in",viewWindow:{min:0}},height:parseInt(CURRENT_OPTIONS.chart_height||300)};</script>

<!-- Wrap the whole widget into a DIV -->
<div>
    <script async>!async function(){const e=document.currentScript.parentElement,t=await async function(){const e=new URLSearchParams(location.search).get("district_id"),t=(await loadCSV(`${CURRENT_OPTIONS["tcm-metadata-url"]}`)).filter(t=>t.district_id===e)[0],a=(await loadCSV("./static/zip-fips-map.csv")).filter(e=>e.zip===t.zip_code)[0].fips;return`US_${t.state}_${a}`}(),a=await loadCSV(`${CURRENT_OPTIONS["cod-data-url"]}/${t}/main.csv`),i=a[0].subregion2_name,n=["search_trends_fever","search_trends_cough","search_trends_pneumonia"],r=a.filter(e=>n.some(t=>""!==e[t])).map(e=>{const t={Date:e.date};return n.forEach(a=>t[(e=>e.split("_").slice(2).join(" "))(a)]=parseFloat(e[a])),t});if(r.filter(e=>n.every(t=>e[t])).length>30){const t=document.createElement("div");e.append(t),await loadGoogleCharts(["corechart"]),new google.visualization.LineChart(t).draw(recordsToDataTable(r),Object.assign({},GOOGLE_CHARTS_CONFIG,{title:`Google Search Trends in ${i}`,curveType:"function",legend:{position:"in"},colors:void 0}))}else e.style.display="none"}();</script>
</div>
            <div class="spacer"></div>
            <div class="spacer"></div>
        </div>

        <div>
            <!-- Chart dependencies -->
<!-- Google Charts -->
<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>

<!-- CSV Parsing -->
<script type="text/javascript" src="./third_party/papaparse/papaparse.min.js"></script>

<!-- Custom dependencies for data handling -->
<script type="text/javascript" src="./static/data-loader.min.js"></script>

<!-- Configuration loading -->
<script type="text/javascript">CACHE=window.CACHE||{CSV:{},gcharts:{}},DEFAULT_OPTIONS=window.DEFAULT_OPTIONS||{"tcm-metadata-url":"https://storage.googleapis.com/school-districts/school-districts-metadata.csv","cod-data-url":"https://storage.googleapis.com/covid19-open-data/v3","tcm-data-url":"https://storage.googleapis.com/school-districts/cases/latest-school-cases.csv"},CURRENT_OPTIONS=window.CURRENT_OPTIONS||Object.keys(DEFAULT_OPTIONS).reduce((t,o)=>Object.assign(t,{[o]:sessionStorage.getItem(o)||DEFAULT_OPTIONS[o]}),{}),GOOGLE_CHARTS_CONFIG=window.GOOGLE_CHARTS_CONFIG||{theme:"material",colors:["#FB780F"],legend:{position:CURRENT_OPTIONS.chart_legend_position||"none"},chartArea:{width:"100%",height:"100%",left:parseInt(CURRENT_OPTIONS.chart_padding_left||64),bottom:parseInt(CURRENT_OPTIONS.chart_padding_bottom||48),top:parseInt(CURRENT_OPTIONS.chart_padding_top||24)},titlePosition:"in",axisTitlesPosition:"in",hAxis:{textPosition:"bottom"},vAxis:{textPosition:"in",viewWindow:{min:0}},height:parseInt(CURRENT_OPTIONS.chart_height||300)};</script>

<!-- Wrap the whole widget into a DIV -->
<div>
    <script async>!async function(){const t=document.currentScript.parentElement,a=await async function(){const t=new URLSearchParams(location.search).get("district_id"),a=(await loadCSV(`${CURRENT_OPTIONS["tcm-metadata-url"]}`)).filter(a=>a.district_id===t)[0],e=(await loadCSV("./static/zip-fips-map.csv")).filter(t=>t.zip===a.zip_code)[0].fips;return`US_${a.state}_${e}`}(),e=await loadCSV(`${CURRENT_OPTIONS["cod-data-url"]}/${a}/main.csv`),i=e[0].subregion2_name,o=e[0],n=Object.keys(e[0]).filter(t=>t.startsWith("population_age_"));if(n.length>0&&n.every(t=>""!==o[t])){const a=document.createElement("div");t.append(a);const e=n.map(t=>({"Age Group":t.replace("population_age_","").replace("_and_older"," and older").replace("_"," - "),Population:parseInt(o[t])}));await loadGoogleCharts(["corechart"]),new google.visualization.ColumnChart(a).draw(recordsToDataTable(e),Object.assign({},GOOGLE_CHARTS_CONFIG,{title:`Age-stratified demographics of ${i}`,colors:["#4E342E"],vAxis:{textPosition:"out",viewWindow:{min:0}}}))}else t.style.display="none"}();</script>
</div>
            <div class="spacer"></div>
            <div class="spacer"></div>
        </div>

    </main>

    <!-- <div id="chart"></div> -->

    <!-- Load analytics at the end of the page -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-179571406-2"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-179571406-2");</script>



</body></html>